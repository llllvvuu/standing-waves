{"version":3,"sources":["../node_modules/scale-color-perceptual/utils/hex2rgb.js","../node_modules/scale-color-perceptual/utils/rgb2hex.js","../node_modules/scale-color-perceptual/utils/interpolate.js","../node_modules/scale-color-perceptual/hex/inferno.json","../node_modules/scale-color-perceptual/inferno.js","../node_modules/scale-color-perceptual/hex/magma.json","../node_modules/scale-color-perceptual/magma.js","../node_modules/scale-color-perceptual/hex/plasma.json","../node_modules/scale-color-perceptual/plasma.js","../node_modules/scale-color-perceptual/hex/viridis.json","../node_modules/scale-color-perceptual/viridis.js","../node_modules/scale-color-perceptual/browser.js","../src/render/text.ts","../src/render/points.ts","../src/sidebar.ts","../src/util.ts","../src/render/rectangular.ts","../src/worker/client.ts","../src/render/hexagonal.ts","../src/canvas.ts","../src/index.ts"],"names":["require_hex2rgb","__commonJSMin","exports","module","hex","require_rgb2hex","zeroPadHex","hexStr","rgb","ch","require_interpolate","hex2rgb","rgb2hex","interpolate","b","ar","ag","ab","br","bg","bb","t","interpolateArray","scaleArr","N","intervalWidth","intervals","i","intervalOffset","require_inferno","require_magma","require_plasma","require_viridis","require_browser","drawCenteredText","text","context","width","height","size","import_scale_color_perceptual","sizeMorphRenderer","x","y","value","multiplier","radius","upAndDownRenderer","shiftedY","viridisRenderer","color","NUM_WAVES","defaultWaveComponents","_","waveComponents","getWaveComponents","setWaveComponents","newWaveComponents","eigenIndexInput","coefficientInput","slowdown","getSlowdown","mountSidebar","coefficientsDiv","section","hr","slowdownInput","setEigenvalues","standingWaves","index","wave","eigenvalueSpan","nEigenvectorsSpan","_a","sidebar","sidebarCollapse","tilingSelect","setGrid","grid","pointStyleSelect","setPointRenderer","weightedWave","timestamp","amplitudeMax","coefficient","eigenvector","eigenvalue","oscillation","maxAmplitude","waveMap","waveMapKey","w","h","loadWaves","key","worker","setWaves","waves","drawRectangles","renderPoint","strideX","strideY","j","getRectangularGridRenderer","canvasState","setRectOmp","getClickHandler","idx","initializeWorkerListener","onLoad","k","m","n","setHexOmp","drawHexagons","prev_left","prev_right","left","right","nHoriz","offsetY","getHexagonalGridRenderer","handleClick","INITIAL_WIDTH","INITIAL_HEIGHT","canvas","initializeCanvas","container","clickHandler","requestFrame","pointRenderer","event","rect","scaleX","scaleY","main","loadingDiv","canvasContainer"],"mappings":"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","sourcesContent":["'use strict'\n\nmodule.exports = function hex2rgb (hex) {\n  return {\n    // skip # at position 0\n    r: parseInt(hex.slice(1, 3), 16) / 255,\n    g: parseInt(hex.slice(3, 5), 16) / 255,\n    b: parseInt(hex.slice(5, 7), 16) / 255\n  }\n}\n","'use strict'\n\nfunction zeroPadHex (hexStr) {\n  return '00'.slice(hexStr.length) + hexStr\n}\n\nmodule.exports = function rgb2hex (rgb) {\n  // Map channel triplet into hex color code\n  return '#' + [rgb.r, rgb.g, rgb.b]\n    // Convert to hex (map [0, 1] => [0, 255] => Z => [0x0, 0xff])\n    .map(function (ch) { return Math.round(ch * 255).toString(16) })\n    // Make sure each channel is two digits long\n    .map(zeroPadHex)\n    .join('')\n}\n","'use strict'\n\nvar hex2rgb = require('./hex2rgb')\nvar rgb2hex = require('./rgb2hex')\n\nfunction interpolate (a, b) {\n  a = hex2rgb(a)\n  b = hex2rgb(b)\n\n  var ar = a.r\n  var ag = a.g\n  var ab = a.b\n  var br = b.r - ar\n  var bg = b.g - ag\n  var bb = b.b - ab\n\n  return function (t) {\n    return rgb2hex({\n      r: ar + br * t,\n      g: ag + bg * t,\n      b: ab + bb * t\n    })\n  }\n}\n\nfunction interpolateArray (scaleArr) {\n  var N = scaleArr.length - 2 // -1 for spacings, -1 for number of interpolate fns\n  var intervalWidth = 1 / N\n  var intervals = []\n\n  for (var i = 0; i <= N; i++) {\n    intervals[i] = interpolate(scaleArr[i], scaleArr[i + 1])\n  }\n\n  return function (t) {\n    if (t < 0 || t > 1) throw new Error('Outside the allowed range of [0, 1]')\n\n    var i = Math.floor(t * N)\n    var intervalOffset = i * intervalWidth\n\n    return intervals[i](t / intervalWidth - intervalOffset / intervalWidth)\n  }\n}\n\nmodule.exports = {\n  interpolate: interpolate,\n  interpolateArray: interpolateArray\n}\n","[\"#000004\",\"#010005\",\"#010106\",\"#010108\",\"#02010a\",\"#02020c\",\"#02020e\",\"#030210\",\"#040312\",\"#040314\",\"#050417\",\"#060419\",\"#07051b\",\"#08051d\",\"#09061f\",\"#0a0722\",\"#0b0724\",\"#0c0826\",\"#0d0829\",\"#0e092b\",\"#10092d\",\"#110a30\",\"#120a32\",\"#140b34\",\"#150b37\",\"#160b39\",\"#180c3c\",\"#190c3e\",\"#1b0c41\",\"#1c0c43\",\"#1e0c45\",\"#1f0c48\",\"#210c4a\",\"#230c4c\",\"#240c4f\",\"#260c51\",\"#280b53\",\"#290b55\",\"#2b0b57\",\"#2d0b59\",\"#2f0a5b\",\"#310a5c\",\"#320a5e\",\"#340a5f\",\"#360961\",\"#380962\",\"#390963\",\"#3b0964\",\"#3d0965\",\"#3e0966\",\"#400a67\",\"#420a68\",\"#440a68\",\"#450a69\",\"#470b6a\",\"#490b6a\",\"#4a0c6b\",\"#4c0c6b\",\"#4d0d6c\",\"#4f0d6c\",\"#510e6c\",\"#520e6d\",\"#540f6d\",\"#550f6d\",\"#57106e\",\"#59106e\",\"#5a116e\",\"#5c126e\",\"#5d126e\",\"#5f136e\",\"#61136e\",\"#62146e\",\"#64156e\",\"#65156e\",\"#67166e\",\"#69166e\",\"#6a176e\",\"#6c186e\",\"#6d186e\",\"#6f196e\",\"#71196e\",\"#721a6e\",\"#741a6e\",\"#751b6e\",\"#771c6d\",\"#781c6d\",\"#7a1d6d\",\"#7c1d6d\",\"#7d1e6d\",\"#7f1e6c\",\"#801f6c\",\"#82206c\",\"#84206b\",\"#85216b\",\"#87216b\",\"#88226a\",\"#8a226a\",\"#8c2369\",\"#8d2369\",\"#8f2469\",\"#902568\",\"#922568\",\"#932667\",\"#952667\",\"#972766\",\"#982766\",\"#9a2865\",\"#9b2964\",\"#9d2964\",\"#9f2a63\",\"#a02a63\",\"#a22b62\",\"#a32c61\",\"#a52c60\",\"#a62d60\",\"#a82e5f\",\"#a92e5e\",\"#ab2f5e\",\"#ad305d\",\"#ae305c\",\"#b0315b\",\"#b1325a\",\"#b3325a\",\"#b43359\",\"#b63458\",\"#b73557\",\"#b93556\",\"#ba3655\",\"#bc3754\",\"#bd3853\",\"#bf3952\",\"#c03a51\",\"#c13a50\",\"#c33b4f\",\"#c43c4e\",\"#c63d4d\",\"#c73e4c\",\"#c83f4b\",\"#ca404a\",\"#cb4149\",\"#cc4248\",\"#ce4347\",\"#cf4446\",\"#d04545\",\"#d24644\",\"#d34743\",\"#d44842\",\"#d54a41\",\"#d74b3f\",\"#d84c3e\",\"#d94d3d\",\"#da4e3c\",\"#db503b\",\"#dd513a\",\"#de5238\",\"#df5337\",\"#e05536\",\"#e15635\",\"#e25734\",\"#e35933\",\"#e45a31\",\"#e55c30\",\"#e65d2f\",\"#e75e2e\",\"#e8602d\",\"#e9612b\",\"#ea632a\",\"#eb6429\",\"#eb6628\",\"#ec6726\",\"#ed6925\",\"#ee6a24\",\"#ef6c23\",\"#ef6e21\",\"#f06f20\",\"#f1711f\",\"#f1731d\",\"#f2741c\",\"#f3761b\",\"#f37819\",\"#f47918\",\"#f57b17\",\"#f57d15\",\"#f67e14\",\"#f68013\",\"#f78212\",\"#f78410\",\"#f8850f\",\"#f8870e\",\"#f8890c\",\"#f98b0b\",\"#f98c0a\",\"#f98e09\",\"#fa9008\",\"#fa9207\",\"#fa9407\",\"#fb9606\",\"#fb9706\",\"#fb9906\",\"#fb9b06\",\"#fb9d07\",\"#fc9f07\",\"#fca108\",\"#fca309\",\"#fca50a\",\"#fca60c\",\"#fca80d\",\"#fcaa0f\",\"#fcac11\",\"#fcae12\",\"#fcb014\",\"#fcb216\",\"#fcb418\",\"#fbb61a\",\"#fbb81d\",\"#fbba1f\",\"#fbbc21\",\"#fbbe23\",\"#fac026\",\"#fac228\",\"#fac42a\",\"#fac62d\",\"#f9c72f\",\"#f9c932\",\"#f9cb35\",\"#f8cd37\",\"#f8cf3a\",\"#f7d13d\",\"#f7d340\",\"#f6d543\",\"#f6d746\",\"#f5d949\",\"#f5db4c\",\"#f4dd4f\",\"#f4df53\",\"#f4e156\",\"#f3e35a\",\"#f3e55d\",\"#f2e661\",\"#f2e865\",\"#f2ea69\",\"#f1ec6d\",\"#f1ed71\",\"#f1ef75\",\"#f1f179\",\"#f2f27d\",\"#f2f482\",\"#f3f586\",\"#f3f68a\",\"#f4f88e\",\"#f5f992\",\"#f6fa96\",\"#f8fb9a\",\"#f9fc9d\",\"#fafda1\",\"#fcffa4\"]","'use strict'\n\nmodule.exports = require('./utils/interpolate').interpolateArray(require('./hex/inferno.json'))\n","[\"#000004\",\"#010005\",\"#010106\",\"#010108\",\"#020109\",\"#02020b\",\"#02020d\",\"#03030f\",\"#030312\",\"#040414\",\"#050416\",\"#060518\",\"#06051a\",\"#07061c\",\"#08071e\",\"#090720\",\"#0a0822\",\"#0b0924\",\"#0c0926\",\"#0d0a29\",\"#0e0b2b\",\"#100b2d\",\"#110c2f\",\"#120d31\",\"#130d34\",\"#140e36\",\"#150e38\",\"#160f3b\",\"#180f3d\",\"#19103f\",\"#1a1042\",\"#1c1044\",\"#1d1147\",\"#1e1149\",\"#20114b\",\"#21114e\",\"#221150\",\"#241253\",\"#251255\",\"#271258\",\"#29115a\",\"#2a115c\",\"#2c115f\",\"#2d1161\",\"#2f1163\",\"#311165\",\"#331067\",\"#341069\",\"#36106b\",\"#38106c\",\"#390f6e\",\"#3b0f70\",\"#3d0f71\",\"#3f0f72\",\"#400f74\",\"#420f75\",\"#440f76\",\"#451077\",\"#471078\",\"#491078\",\"#4a1079\",\"#4c117a\",\"#4e117b\",\"#4f127b\",\"#51127c\",\"#52137c\",\"#54137d\",\"#56147d\",\"#57157e\",\"#59157e\",\"#5a167e\",\"#5c167f\",\"#5d177f\",\"#5f187f\",\"#601880\",\"#621980\",\"#641a80\",\"#651a80\",\"#671b80\",\"#681c81\",\"#6a1c81\",\"#6b1d81\",\"#6d1d81\",\"#6e1e81\",\"#701f81\",\"#721f81\",\"#732081\",\"#752181\",\"#762181\",\"#782281\",\"#792282\",\"#7b2382\",\"#7c2382\",\"#7e2482\",\"#802582\",\"#812581\",\"#832681\",\"#842681\",\"#862781\",\"#882781\",\"#892881\",\"#8b2981\",\"#8c2981\",\"#8e2a81\",\"#902a81\",\"#912b81\",\"#932b80\",\"#942c80\",\"#962c80\",\"#982d80\",\"#992d80\",\"#9b2e7f\",\"#9c2e7f\",\"#9e2f7f\",\"#a02f7f\",\"#a1307e\",\"#a3307e\",\"#a5317e\",\"#a6317d\",\"#a8327d\",\"#aa337d\",\"#ab337c\",\"#ad347c\",\"#ae347b\",\"#b0357b\",\"#b2357b\",\"#b3367a\",\"#b5367a\",\"#b73779\",\"#b83779\",\"#ba3878\",\"#bc3978\",\"#bd3977\",\"#bf3a77\",\"#c03a76\",\"#c23b75\",\"#c43c75\",\"#c53c74\",\"#c73d73\",\"#c83e73\",\"#ca3e72\",\"#cc3f71\",\"#cd4071\",\"#cf4070\",\"#d0416f\",\"#d2426f\",\"#d3436e\",\"#d5446d\",\"#d6456c\",\"#d8456c\",\"#d9466b\",\"#db476a\",\"#dc4869\",\"#de4968\",\"#df4a68\",\"#e04c67\",\"#e24d66\",\"#e34e65\",\"#e44f64\",\"#e55064\",\"#e75263\",\"#e85362\",\"#e95462\",\"#ea5661\",\"#eb5760\",\"#ec5860\",\"#ed5a5f\",\"#ee5b5e\",\"#ef5d5e\",\"#f05f5e\",\"#f1605d\",\"#f2625d\",\"#f2645c\",\"#f3655c\",\"#f4675c\",\"#f4695c\",\"#f56b5c\",\"#f66c5c\",\"#f66e5c\",\"#f7705c\",\"#f7725c\",\"#f8745c\",\"#f8765c\",\"#f9785d\",\"#f9795d\",\"#f97b5d\",\"#fa7d5e\",\"#fa7f5e\",\"#fa815f\",\"#fb835f\",\"#fb8560\",\"#fb8761\",\"#fc8961\",\"#fc8a62\",\"#fc8c63\",\"#fc8e64\",\"#fc9065\",\"#fd9266\",\"#fd9467\",\"#fd9668\",\"#fd9869\",\"#fd9a6a\",\"#fd9b6b\",\"#fe9d6c\",\"#fe9f6d\",\"#fea16e\",\"#fea36f\",\"#fea571\",\"#fea772\",\"#fea973\",\"#feaa74\",\"#feac76\",\"#feae77\",\"#feb078\",\"#feb27a\",\"#feb47b\",\"#feb67c\",\"#feb77e\",\"#feb97f\",\"#febb81\",\"#febd82\",\"#febf84\",\"#fec185\",\"#fec287\",\"#fec488\",\"#fec68a\",\"#fec88c\",\"#feca8d\",\"#fecc8f\",\"#fecd90\",\"#fecf92\",\"#fed194\",\"#fed395\",\"#fed597\",\"#fed799\",\"#fed89a\",\"#fdda9c\",\"#fddc9e\",\"#fddea0\",\"#fde0a1\",\"#fde2a3\",\"#fde3a5\",\"#fde5a7\",\"#fde7a9\",\"#fde9aa\",\"#fdebac\",\"#fcecae\",\"#fceeb0\",\"#fcf0b2\",\"#fcf2b4\",\"#fcf4b6\",\"#fcf6b8\",\"#fcf7b9\",\"#fcf9bb\",\"#fcfbbd\",\"#fcfdbf\"]","'use strict'\n\nmodule.exports = require('./utils/interpolate').interpolateArray(require('./hex/magma.json'))\n","[\"#0d0887\",\"#100788\",\"#130789\",\"#16078a\",\"#19068c\",\"#1b068d\",\"#1d068e\",\"#20068f\",\"#220690\",\"#240691\",\"#260591\",\"#280592\",\"#2a0593\",\"#2c0594\",\"#2e0595\",\"#2f0596\",\"#310597\",\"#330597\",\"#350498\",\"#370499\",\"#38049a\",\"#3a049a\",\"#3c049b\",\"#3e049c\",\"#3f049c\",\"#41049d\",\"#43039e\",\"#44039e\",\"#46039f\",\"#48039f\",\"#4903a0\",\"#4b03a1\",\"#4c02a1\",\"#4e02a2\",\"#5002a2\",\"#5102a3\",\"#5302a3\",\"#5502a4\",\"#5601a4\",\"#5801a4\",\"#5901a5\",\"#5b01a5\",\"#5c01a6\",\"#5e01a6\",\"#6001a6\",\"#6100a7\",\"#6300a7\",\"#6400a7\",\"#6600a7\",\"#6700a8\",\"#6900a8\",\"#6a00a8\",\"#6c00a8\",\"#6e00a8\",\"#6f00a8\",\"#7100a8\",\"#7201a8\",\"#7401a8\",\"#7501a8\",\"#7701a8\",\"#7801a8\",\"#7a02a8\",\"#7b02a8\",\"#7d03a8\",\"#7e03a8\",\"#8004a8\",\"#8104a7\",\"#8305a7\",\"#8405a7\",\"#8606a6\",\"#8707a6\",\"#8808a6\",\"#8a09a5\",\"#8b0aa5\",\"#8d0ba5\",\"#8e0ca4\",\"#8f0da4\",\"#910ea3\",\"#920fa3\",\"#9410a2\",\"#9511a1\",\"#9613a1\",\"#9814a0\",\"#99159f\",\"#9a169f\",\"#9c179e\",\"#9d189d\",\"#9e199d\",\"#a01a9c\",\"#a11b9b\",\"#a21d9a\",\"#a31e9a\",\"#a51f99\",\"#a62098\",\"#a72197\",\"#a82296\",\"#aa2395\",\"#ab2494\",\"#ac2694\",\"#ad2793\",\"#ae2892\",\"#b02991\",\"#b12a90\",\"#b22b8f\",\"#b32c8e\",\"#b42e8d\",\"#b52f8c\",\"#b6308b\",\"#b7318a\",\"#b83289\",\"#ba3388\",\"#bb3488\",\"#bc3587\",\"#bd3786\",\"#be3885\",\"#bf3984\",\"#c03a83\",\"#c13b82\",\"#c23c81\",\"#c33d80\",\"#c43e7f\",\"#c5407e\",\"#c6417d\",\"#c7427c\",\"#c8437b\",\"#c9447a\",\"#ca457a\",\"#cb4679\",\"#cc4778\",\"#cc4977\",\"#cd4a76\",\"#ce4b75\",\"#cf4c74\",\"#d04d73\",\"#d14e72\",\"#d24f71\",\"#d35171\",\"#d45270\",\"#d5536f\",\"#d5546e\",\"#d6556d\",\"#d7566c\",\"#d8576b\",\"#d9586a\",\"#da5a6a\",\"#da5b69\",\"#db5c68\",\"#dc5d67\",\"#dd5e66\",\"#de5f65\",\"#de6164\",\"#df6263\",\"#e06363\",\"#e16462\",\"#e26561\",\"#e26660\",\"#e3685f\",\"#e4695e\",\"#e56a5d\",\"#e56b5d\",\"#e66c5c\",\"#e76e5b\",\"#e76f5a\",\"#e87059\",\"#e97158\",\"#e97257\",\"#ea7457\",\"#eb7556\",\"#eb7655\",\"#ec7754\",\"#ed7953\",\"#ed7a52\",\"#ee7b51\",\"#ef7c51\",\"#ef7e50\",\"#f07f4f\",\"#f0804e\",\"#f1814d\",\"#f1834c\",\"#f2844b\",\"#f3854b\",\"#f3874a\",\"#f48849\",\"#f48948\",\"#f58b47\",\"#f58c46\",\"#f68d45\",\"#f68f44\",\"#f79044\",\"#f79143\",\"#f79342\",\"#f89441\",\"#f89540\",\"#f9973f\",\"#f9983e\",\"#f99a3e\",\"#fa9b3d\",\"#fa9c3c\",\"#fa9e3b\",\"#fb9f3a\",\"#fba139\",\"#fba238\",\"#fca338\",\"#fca537\",\"#fca636\",\"#fca835\",\"#fca934\",\"#fdab33\",\"#fdac33\",\"#fdae32\",\"#fdaf31\",\"#fdb130\",\"#fdb22f\",\"#fdb42f\",\"#fdb52e\",\"#feb72d\",\"#feb82c\",\"#feba2c\",\"#febb2b\",\"#febd2a\",\"#febe2a\",\"#fec029\",\"#fdc229\",\"#fdc328\",\"#fdc527\",\"#fdc627\",\"#fdc827\",\"#fdca26\",\"#fdcb26\",\"#fccd25\",\"#fcce25\",\"#fcd025\",\"#fcd225\",\"#fbd324\",\"#fbd524\",\"#fbd724\",\"#fad824\",\"#fada24\",\"#f9dc24\",\"#f9dd25\",\"#f8df25\",\"#f8e125\",\"#f7e225\",\"#f7e425\",\"#f6e626\",\"#f6e826\",\"#f5e926\",\"#f5eb27\",\"#f4ed27\",\"#f3ee27\",\"#f3f027\",\"#f2f227\",\"#f1f426\",\"#f1f525\",\"#f0f724\",\"#f0f921\"]","'use strict'\n\nmodule.exports = require('./utils/interpolate').interpolateArray(require('./hex/plasma.json'))\n","[\"#440154\",\"#440256\",\"#450457\",\"#450559\",\"#46075a\",\"#46085c\",\"#460a5d\",\"#460b5e\",\"#470d60\",\"#470e61\",\"#471063\",\"#471164\",\"#471365\",\"#481467\",\"#481668\",\"#481769\",\"#48186a\",\"#481a6c\",\"#481b6d\",\"#481c6e\",\"#481d6f\",\"#481f70\",\"#482071\",\"#482173\",\"#482374\",\"#482475\",\"#482576\",\"#482677\",\"#482878\",\"#482979\",\"#472a7a\",\"#472c7a\",\"#472d7b\",\"#472e7c\",\"#472f7d\",\"#46307e\",\"#46327e\",\"#46337f\",\"#463480\",\"#453581\",\"#453781\",\"#453882\",\"#443983\",\"#443a83\",\"#443b84\",\"#433d84\",\"#433e85\",\"#423f85\",\"#424086\",\"#424186\",\"#414287\",\"#414487\",\"#404588\",\"#404688\",\"#3f4788\",\"#3f4889\",\"#3e4989\",\"#3e4a89\",\"#3e4c8a\",\"#3d4d8a\",\"#3d4e8a\",\"#3c4f8a\",\"#3c508b\",\"#3b518b\",\"#3b528b\",\"#3a538b\",\"#3a548c\",\"#39558c\",\"#39568c\",\"#38588c\",\"#38598c\",\"#375a8c\",\"#375b8d\",\"#365c8d\",\"#365d8d\",\"#355e8d\",\"#355f8d\",\"#34608d\",\"#34618d\",\"#33628d\",\"#33638d\",\"#32648e\",\"#32658e\",\"#31668e\",\"#31678e\",\"#31688e\",\"#30698e\",\"#306a8e\",\"#2f6b8e\",\"#2f6c8e\",\"#2e6d8e\",\"#2e6e8e\",\"#2e6f8e\",\"#2d708e\",\"#2d718e\",\"#2c718e\",\"#2c728e\",\"#2c738e\",\"#2b748e\",\"#2b758e\",\"#2a768e\",\"#2a778e\",\"#2a788e\",\"#29798e\",\"#297a8e\",\"#297b8e\",\"#287c8e\",\"#287d8e\",\"#277e8e\",\"#277f8e\",\"#27808e\",\"#26818e\",\"#26828e\",\"#26828e\",\"#25838e\",\"#25848e\",\"#25858e\",\"#24868e\",\"#24878e\",\"#23888e\",\"#23898e\",\"#238a8d\",\"#228b8d\",\"#228c8d\",\"#228d8d\",\"#218e8d\",\"#218f8d\",\"#21908d\",\"#21918c\",\"#20928c\",\"#20928c\",\"#20938c\",\"#1f948c\",\"#1f958b\",\"#1f968b\",\"#1f978b\",\"#1f988b\",\"#1f998a\",\"#1f9a8a\",\"#1e9b8a\",\"#1e9c89\",\"#1e9d89\",\"#1f9e89\",\"#1f9f88\",\"#1fa088\",\"#1fa188\",\"#1fa187\",\"#1fa287\",\"#20a386\",\"#20a486\",\"#21a585\",\"#21a685\",\"#22a785\",\"#22a884\",\"#23a983\",\"#24aa83\",\"#25ab82\",\"#25ac82\",\"#26ad81\",\"#27ad81\",\"#28ae80\",\"#29af7f\",\"#2ab07f\",\"#2cb17e\",\"#2db27d\",\"#2eb37c\",\"#2fb47c\",\"#31b57b\",\"#32b67a\",\"#34b679\",\"#35b779\",\"#37b878\",\"#38b977\",\"#3aba76\",\"#3bbb75\",\"#3dbc74\",\"#3fbc73\",\"#40bd72\",\"#42be71\",\"#44bf70\",\"#46c06f\",\"#48c16e\",\"#4ac16d\",\"#4cc26c\",\"#4ec36b\",\"#50c46a\",\"#52c569\",\"#54c568\",\"#56c667\",\"#58c765\",\"#5ac864\",\"#5cc863\",\"#5ec962\",\"#60ca60\",\"#63cb5f\",\"#65cb5e\",\"#67cc5c\",\"#69cd5b\",\"#6ccd5a\",\"#6ece58\",\"#70cf57\",\"#73d056\",\"#75d054\",\"#77d153\",\"#7ad151\",\"#7cd250\",\"#7fd34e\",\"#81d34d\",\"#84d44b\",\"#86d549\",\"#89d548\",\"#8bd646\",\"#8ed645\",\"#90d743\",\"#93d741\",\"#95d840\",\"#98d83e\",\"#9bd93c\",\"#9dd93b\",\"#a0da39\",\"#a2da37\",\"#a5db36\",\"#a8db34\",\"#aadc32\",\"#addc30\",\"#b0dd2f\",\"#b2dd2d\",\"#b5de2b\",\"#b8de29\",\"#bade28\",\"#bddf26\",\"#c0df25\",\"#c2df23\",\"#c5e021\",\"#c8e020\",\"#cae11f\",\"#cde11d\",\"#d0e11c\",\"#d2e21b\",\"#d5e21a\",\"#d8e219\",\"#dae319\",\"#dde318\",\"#dfe318\",\"#e2e418\",\"#e5e419\",\"#e7e419\",\"#eae51a\",\"#ece51b\",\"#efe51c\",\"#f1e51d\",\"#f4e61e\",\"#f6e620\",\"#f8e621\",\"#fbe723\",\"#fde725\"]","'use strict'\n\nmodule.exports = require('./utils/interpolate').interpolateArray(require('./hex/viridis.json'))\n","'use strict'\n\nmodule.exports = {\n  inferno: require('./inferno'),\n  magma: require('./magma'),\n  plasma: require('./plasma'),\n  viridis: require('./viridis')\n}\n","export function drawCenteredText(\n  text: string,\n  context: CanvasRenderingContext2D,\n  width: number,\n  height: number,\n  size = 16,\n) {\n  context.textBaseline = \"middle\"\n  context.textAlign = \"center\"\n  context.font = `${size}px sans-serif`\n  context.fillText(text, width / 2, height / 2)\n}\n","import { viridis } from \"scale-color-perceptual\"\n\nimport { PointRenderer } from \"../canvas\"\n\nexport const sizeMorphRenderer: PointRenderer = (\n  context,\n  x,\n  y,\n  width,\n  height,\n  value,\n) => {\n  const multiplier = (1 + value) / 2\n  const radius = (Math.min(width, height) * multiplier) / 2\n  context.beginPath()\n  context.arc(x, y, radius, 0, 2 * Math.PI)\n  context.fill()\n}\n\nexport const upAndDownRenderer: PointRenderer = (\n  context,\n  x,\n  y,\n  width,\n  height,\n  value,\n) => {\n  const radius = Math.min(width, height) / 4\n  const shiftedY = y + (value * height) / 4\n  context.beginPath()\n  context.arc(x, shiftedY, radius, 0, 2 * Math.PI)\n  context.fill()\n}\n\n/** Rainbow according to CIELAB color space. */\nexport const viridisRenderer: PointRenderer = (\n  context,\n  x,\n  y,\n  width,\n  height,\n  value,\n) => {\n  const radius = Math.min(width, height) / 2\n  const color = viridis(value / 2 + 0.5)\n  context.fillStyle = color\n  context.beginPath()\n  context.arc(x, y, radius, 0, 2 * Math.PI)\n  context.fill()\n  context.fillStyle = \"#fff\"\n}\n","import { grid as rectGrid } from \"./render/rectangular\"\nimport { grid as hexGrid } from \"./render/hexagonal\"\nimport {\n  sizeMorphRenderer,\n  upAndDownRenderer,\n  viridisRenderer,\n} from \"./render/points\"\nimport { setGrid, setPointRenderer } from \"./canvas\"\n\nimport type { StandingWave } from \"./types\"\n\nexport const NUM_WAVES = 40\n\nexport interface WaveComponent {\n  index: number\n  coefficient: number\n}\nconst defaultWaveComponents: WaveComponent[] = Array.from(\n  { length: NUM_WAVES },\n  (_, i) => ({ index: i === 0 ? 77 : i - 1, coefficient: i === 0 ? 1 : 0 })\n)\nlet waveComponents: WaveComponent[] = defaultWaveComponents\nexport const getWaveComponents = () => waveComponents\nexport function setWaveComponents (newWaveComponents: WaveComponent[]) {\n  waveComponents = newWaveComponents\n  for (let i = 0; i < Math.min(NUM_WAVES, waveComponents.length); i++) {\n    const eigenIndexInput = document.getElementById(`eigenIndex${i}`)\n    const coefficientInput = document.getElementById(`coefficient${i}`)\n    if (eigenIndexInput && eigenIndexInput instanceof HTMLInputElement) {\n      eigenIndexInput.value = waveComponents[i].index.toString()\n    }\n    if (coefficientInput && coefficientInput instanceof HTMLInputElement) {\n      coefficientInput.value = waveComponents[i].coefficient.toString()\n    }\n  }\n}\n\nlet slowdown = 200\nexport const getSlowdown = () => slowdown\n\nexport function mountSidebar() {\n  const coefficientsDiv = document.getElementById(\"eigenvectorCoefficients\")\n  if (coefficientsDiv == null) return\n  for (let i = 0; i < NUM_WAVES; i++) {\n    const section = document.createElement(\"div\")\n    section.className = \"section\"\n    section.innerHTML = `\n      <label>Standing wave index:</label>\n      <input type=\"number\" id=\"eigenIndex${i}\" min=\"0\" max=\"9999\" step=\"1\" value=\"${\n      i === 0 ? 78 : i\n    }\">\n      <span id=\"eigenvalue${i}\">Eigenvalue: Loading...</span>\n      <label>Relative Weight:</label>\n      <input type=\"range\" id=\"coefficient${i}\" min=\"0\" max=\"1\" step=\"0.01\" value=\"${\n      i === 0 ? 1 : 0\n    }\">\n    `\n    coefficientsDiv.appendChild(section)\n    if (i < NUM_WAVES - 1) {\n      const hr = document.createElement(\"hr\")\n      section.appendChild(hr)\n    }\n  }\n\n  // After creating all input elements, add event listeners to them\n  for (let i = 0; i < NUM_WAVES; i++) {\n    const eigenIndexInput = document.getElementById(`eigenIndex${i}`)\n    const coefficientInput = document.getElementById(`coefficient${i}`)\n\n    if (eigenIndexInput && eigenIndexInput instanceof HTMLInputElement) {\n      eigenIndexInput.addEventListener(\"input\", function () {\n        waveComponents[i].index = parseInt(eigenIndexInput.value) - 1\n      })\n    }\n\n    if (coefficientInput && coefficientInput instanceof HTMLInputElement) {\n      coefficientInput.addEventListener(\"input\", function () {\n        waveComponents[i].coefficient = parseFloat(coefficientInput.value)\n      })\n    }\n  }\n\n  const slowdownInput = document.getElementById(\"slowdown\")\n  if (slowdownInput && slowdownInput instanceof HTMLInputElement) {\n    slowdownInput.addEventListener(\"input\", function () {\n      slowdown = parseFloat(slowdownInput.value)\n    })\n  }\n}\n\nexport function setEigenvalues(standingWaves: StandingWave[]) {\n  for (let i = 0; i < NUM_WAVES; i++) {\n    const { index } = waveComponents[i]\n    const wave = standingWaves[index]\n    if (wave == null) continue\n    const eigenvalueSpan = document.getElementById(`eigenvalue${i}`)\n    if (eigenvalueSpan) {\n      eigenvalueSpan.innerHTML = `Eigenvalue: ${wave.eigenvalue.toFixed(8)}`\n    }\n\n    const eigenIndexInput = document.getElementById(`eigenIndex${i}`)\n    eigenIndexInput?.setAttribute(\"max\", `${standingWaves.length}`)\n  }\n\n  const nEigenvectorsSpan = document.getElementById(\"nEigenvectors\")\n  if (nEigenvectorsSpan) {\n    nEigenvectorsSpan.innerHTML = `${standingWaves.length}`\n  }\n}\n\ndocument?.getElementById(\"sidebar-collapse\")?.addEventListener(\"click\", () => {\n  const sidebar = document.getElementById(\"sidebar\")\n  const sidebarCollapse = document.getElementById(\"sidebar-collapse\")\n  if (sidebar)\n    sidebar.style.display = sidebar.style.display !== \"block\" ? \"block\" : \"none\"\n  if (sidebarCollapse)\n    sidebarCollapse.innerHTML =\n      sidebar?.style.display !== \"block\" ? \"Open Options\" : \"Close Options\"\n})\n\ndocument?.getElementById(\"reset-weights\")?.addEventListener(\"click\", () => {\n  setWaveComponents(defaultWaveComponents)\n})\n\nconst tilingSelect = document.getElementById(\"tiling\")\nif (tilingSelect instanceof HTMLSelectElement) {\n  tilingSelect.addEventListener(\"change\", () => {\n    if (tilingSelect.value === \"hex\") {\n      setGrid(hexGrid)\n    } else if (tilingSelect.value === \"rect\") {\n      setGrid(rectGrid)\n    }\n  })\n}\n\nconst pointStyleSelect = document.getElementById(\"pointStyle\")\nif (pointStyleSelect instanceof HTMLSelectElement) {\n  pointStyleSelect.addEventListener(\"change\", () => {\n    if (pointStyleSelect.value === \"morphSize\") {\n      setPointRenderer(sizeMorphRenderer)\n    } else if (pointStyleSelect.value === \"upAndDown\") {\n      setPointRenderer(upAndDownRenderer)\n    } else if (pointStyleSelect.value === \"viridis\") {\n      setPointRenderer(viridisRenderer)\n    }\n  })\n}\n","import type { WaveComponent } from \"./sidebar\"\nimport type { StandingWave } from \"./types\"\n\n/**\n * @param waveComponents - [{ index, coefficient }]\n * @param standingWaves - [{ eigenvalue, eigenvector }]\n * @param timestamp - time in milliseconds\n * @returns weighted sum of wave components\n */\nexport function weightedWave(\n  waveComponents: WaveComponent[],\n  standingWaves: StandingWave[],\n  slowdown: number,\n  timestamp: number\n) {\n  const wave = new Array(standingWaves[0].eigenvector.length).fill(0)\n  const amplitudeMax = new Array(standingWaves[0].eigenvector.length).fill(0)\n  for (const { index, coefficient } of waveComponents) {\n    if (standingWaves[index] == null) continue\n    const { eigenvector, eigenvalue } = standingWaves[index]\n    const oscillation = Math.cos(timestamp * eigenvalue / slowdown)\n    wave.forEach((_, i) => {\n      wave[i] += coefficient * eigenvector[i] * oscillation\n      amplitudeMax[i] += Math.abs(coefficient * eigenvector[i])\n    })\n  }\n  const maxAmplitude = Math.max(...amplitudeMax)\n  return wave.map(x => x / maxAmplitude)\n}\n","import { drawCenteredText } from \"./text\"\nimport { worker } from \"../worker/client\"\nimport {\n  getWaveComponents,\n  getSlowdown,\n  setEigenvalues,\n  setWaveComponents,\n  WaveComponent,\n  NUM_WAVES,\n} from \"../sidebar\"\nimport { weightedWave } from \"../util\"\n\nimport type { Renderer, PointRenderer } from \"../canvas\"\nimport type { MaybeStandingWaves, StandingWave } from \"../types\"\n\nconst waveMap: Record<`${number}-${number}`, MaybeStandingWaves> = {}\n\nfunction waveMapKey(w: number, h: number): `${number}-${number}` {\n  return `${w}-${h}`\n}\n\nfunction loadWaves(w: number, h: number) {\n  const key = waveMapKey(w, h)\n  if (key in waveMap) {\n    return\n  }\n  waveMap[key] = \"loading\"\n  worker.postMessage({\n    type: \"getRectStandingWaves\",\n    parameters: [w, h],\n  })\n}\n\nexport function setWaves(w: number, h: number, waves: StandingWave[]) {\n  waveMap[waveMapKey(w, h)] = waves\n}\n\nfunction drawRectangles(\n  w: number,\n  h: number,\n  wave: number[],\n  context: CanvasRenderingContext2D,\n  renderPoint: PointRenderer,\n  width: number,\n  height: number,\n) {\n  const strideX = width / (w + 2)\n  const strideY = height / (h + 2)\n\n  for (let i = 0; i < w; ++i) {\n    for (let j = 0; j < h; ++j) {\n      const index = i + j * w\n      renderPoint(\n        context,\n        (i + 1) * strideX,\n        (j + 1) * strideY,\n        strideX,\n        strideY,\n        wave[index],\n      )\n    }\n  }\n}\n\nexport function getRectangularGridRenderer(w: number, h: number): Renderer {\n  return (canvasState, timestamp) => {\n    const key = waveMapKey(w, h)\n    if (key in waveMap) {\n      const waves = waveMap[key]\n      if (waves !== \"loading\") {\n        drawRectangles(\n          w,\n          h,\n          weightedWave(getWaveComponents(), waves, getSlowdown(), timestamp),\n          canvasState.context,\n          canvasState.renderPoint,\n          canvasState.canvas.width,\n          canvasState.canvas.height,\n        )\n        setEigenvalues(waves)\n        return\n      }\n    }\n    drawCenteredText(\n      \"Calculating rectangular grid eigenvectors... (~5 seconds desktop, ~10 seconds mobile)\",\n      canvasState.context,\n      canvasState.canvas.width,\n      canvasState.canvas.height,\n    )\n    loadWaves(w, h)\n  }\n}\n\nexport function setRectOmp(key: string, waveComponents: WaveComponent[]) {\n  const waves = waveMap[key]\n  if (waves == null) return\n  console.log(waveComponents)\n  setWaveComponents(waveComponents)\n}\n\nexport function getClickHandler(w: number, h: number) {\n  return (x: number, y: number, width: number, height: number) => {\n    const key = waveMapKey(w, h)\n    const waves = waveMap[key]\n    const strideX = width / (w + 2)\n    const strideY = height / (h + 2)\n    const i = Math.round(x / strideX - 1)\n    const j = Math.round(y / strideY - 1)\n    const idx = i + j * w\n\n    if (waves && waves !== \"loading\") {\n      worker.postMessage({\n        type: \"getOmp\",\n        key,\n        parameters: [waves.map((wave) => wave.eigenvector), idx, NUM_WAVES],\n      })\n    }\n  }\n}\n\nexport const grid = {\n  render: getRectangularGridRenderer(30, 30),\n  handleClick: getClickHandler(30, 30),\n}\n","import { setHexOmp, setWaves as setHexWaves } from \"../render/hexagonal\"\nimport { setRectOmp, setWaves as setRectWaves } from \"../render/rectangular\"\n\nexport const worker = new Worker(\"dist/worker.js\")\n\nexport function initializeWorkerListener(onLoad: () => void) {\n  worker.onmessage = (e) => {\n    if (e.data.type === \"wasmReady\") {\n      worker.postMessage({\n        type: \"getHexStandingWaves\",\n        parameters: [20, 20, 20],\n      })\n      onLoad()\n    } else if (e.data.type === \"hexStandingWaves\") {\n      const [k, m, n] = e.data.parameters\n      setHexWaves(k, m, n, e.data.data)\n    } else if (e.data.type === \"rectStandingWaves\") {\n      const [w, h] = e.data.parameters\n      setRectWaves(w, h, e.data.data)\n    } else if (e.data.type === \"omp\") {\n      setRectOmp(e.data.key, e.data.data)\n      setHexOmp(e.data.key, e.data.data)\n    }\n  }\n}\n","import { drawCenteredText } from \"./text\"\nimport { worker } from \"../worker/client\"\nimport {\n  getWaveComponents,\n  getSlowdown,\n  setEigenvalues,\n  setWaveComponents,\n  type WaveComponent,\n} from \"../sidebar\"\nimport { weightedWave } from \"../util\"\n\nimport type { Renderer, PointRenderer } from \"../canvas\"\nimport type { MaybeStandingWaves, StandingWave } from \"../types\"\n\nconst waveMap: Record<`${number}-${number}-${number}`, MaybeStandingWaves> = {}\n\nfunction waveMapKey(\n  k: number,\n  m: number,\n  n: number,\n): `${number}-${number}-${number}` {\n  return `${k}-${m}-${n}`\n}\n\nfunction loadWaves(k: number, m: number, n: number) {\n  const key = waveMapKey(k, m, n)\n  if (key in waveMap) {\n    return\n  }\n  waveMap[key] = \"loading\"\n  worker.postMessage({\n    type: \"getHexStandingWaves\",\n    parameters: [k, m, n],\n  })\n}\n\nexport function setWaves(\n  k: number,\n  m: number,\n  n: number,\n  waves: StandingWave[],\n) {\n  waveMap[waveMapKey(k, m, n)] = waves\n}\n\nfunction drawHexagons(\n  k: number,\n  m: number,\n  n: number,\n  wave: number[],\n  context: CanvasRenderingContext2D,\n  renderPoint: PointRenderer,\n  width: number,\n  height: number,\n) {\n  let prev_left = 0\n  let prev_right = 0\n  let left = m\n  let right = m + 2 * (k - 1)\n\n  const nHoriz = right + n\n  const strideX = width / nHoriz\n  const strideY = strideX * Math.sqrt(3)\n  const offsetY = (height * (1 - Math.sqrt(3) / 2)) / 2\n\n  let i = 0\n  for (let y = 0; y < m + n - 1; y++) {\n    for (let x = left; x <= right; x += 2) {\n      renderPoint(\n        context,\n        x * strideX,\n        y * strideY + offsetY,\n        2 * strideX,\n        2 * strideX,\n        wave[i++],\n      )\n    }\n    prev_left = left\n    prev_right = right\n    left = y + 1 < m ? prev_left - 1 : prev_left + 1\n    right = y + 1 < n ? prev_right + 1 : prev_right - 1\n  }\n}\n\nexport function getHexagonalGridRenderer(\n  k: number,\n  m: number,\n  n: number,\n): Renderer {\n  return (canvasState, timestamp) => {\n    const key = waveMapKey(k, m, n)\n    if (key in waveMap) {\n      const waves = waveMap[key]\n      if (waves !== \"loading\") {\n        drawHexagons(\n          k,\n          m,\n          n,\n          weightedWave(getWaveComponents(), waves, getSlowdown(), timestamp),\n          canvasState.context,\n          canvasState.renderPoint,\n          canvasState.canvas.width,\n          canvasState.canvas.height,\n        )\n        setEigenvalues(waves)\n        return\n      }\n    }\n    drawCenteredText(\n      \"Calculating hexagonal grid eigenvectors... (~5 seconds desktop, ~10 seconds mobile)\",\n      canvasState.context,\n      canvasState.canvas.width,\n      canvasState.canvas.height,\n    )\n    loadWaves(k, m, n)\n  }\n}\n\nexport function setHexOmp(key: string, waveComponents: WaveComponent[]) {\n  const waves = waveMap[key]\n  if (waves == null) return\n  setWaveComponents(waveComponents)\n}\n\nexport function handleClick(x: number, y: number) {\n  console.log(\"TODO: handle hex click\", x, y)\n}\n\nexport const grid = {\n  render: getHexagonalGridRenderer(20, 20, 20),\n  handleClick,\n}\n","import {\n  getHexagonalGridRenderer,\n  handleClick as handleHexClick,\n} from \"./render/hexagonal\"\nimport { sizeMorphRenderer } from \"./render/points\"\n\nexport const INITIAL_WIDTH = 800\nexport const INITIAL_HEIGHT = 800\n\ninterface CanvasState {\n  grid: Grid\n  renderPoint: PointRenderer\n  canvas: HTMLCanvasElement\n  context: CanvasRenderingContext2D\n  baseTime: number\n}\n\nexport type Renderer = (canvasState: CanvasState, timestamp: number) => void\n\ninterface Grid {\n  render: Renderer\n  handleClick: (x: number, y: number, width: number, height: number) => void\n}\n\nexport type PointRenderer = (\n  context: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  value: number\n) => void\n\nconst canvas = document.createElement(\"canvas\")\nconst canvasState: CanvasState = {\n  grid: {\n    render: getHexagonalGridRenderer(20, 20, 20),\n    handleClick: handleHexClick,\n  },\n  renderPoint: sizeMorphRenderer,\n  canvas,\n  context: canvas.getContext(\"2d\")!,\n  baseTime: 0,\n}\n\nexport function initializeCanvas(container: HTMLElement) {\n  const { canvas, context } = canvasState\n  canvas.width = INITIAL_WIDTH\n  canvas.height = INITIAL_HEIGHT\n  canvas.addEventListener(\"click\", clickHandler)\n  context.strokeStyle = \"#FFFFFF\"\n  context.fillStyle = \"#FFFFFF\"\n  container.appendChild(canvas)\n  requestFrame(performance.now())\n}\n\nexport function setGrid(grid: Grid) {\n  canvasState.grid = grid\n}\n\nexport function setPointRenderer(pointRenderer: PointRenderer) {\n  canvasState.renderPoint = pointRenderer\n}\n\nfunction requestFrame(timestamp: number) {\n  canvasState.context.clearRect(0, 0, canvas.width, canvas.height)\n  canvasState.grid.render(canvasState, timestamp - canvasState.baseTime)\n  window.requestAnimationFrame(requestFrame)\n}\n\nfunction clickHandler(event: MouseEvent) {\n  const rect = canvasState.canvas.getBoundingClientRect()\n\n  const scaleX = canvas.width / rect.width\n  const scaleY = canvas.height / rect.height\n\n  const x = (event.clientX - rect.left) * scaleX\n  const y = (event.clientY - rect.top) * scaleY\n\n  canvasState.baseTime = performance.now()\n  canvasState.grid.handleClick(\n    x,\n    y,\n    canvasState.canvas.width,\n    canvasState.canvas.height\n  )\n}\n","import { initializeCanvas } from \"./canvas\"\nimport { mountSidebar } from \"./sidebar\"\nimport { initializeWorkerListener } from \"./worker/client\"\n\nasync function main() {\n  const loadingDiv = document.getElementById(\"loading\")\n  if (loadingDiv) loadingDiv.innerHTML = \"Loading WASM module...\"\n  const canvasContainer = document.getElementById(\"canvas-container\")\n  if (canvasContainer == null) throw new Error(\"no canvas container\")\n  mountSidebar()\n  initializeWorkerListener(() => {\n    document.getElementById(\"loading\")?.remove()\n    initializeCanvas(canvasContainer)\n  })\n}\n\nif (document.readyState !== \"loading\") {\n  main()\n} else {\n  document.addEventListener(\"DOMContentLoaded\", main)\n}\n"]}